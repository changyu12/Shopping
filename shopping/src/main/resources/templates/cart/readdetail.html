<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
<script src="https://cdn.iamport.kr/v1/iamport.js"></script>
<script>
IMP.init('imp53620510') // 예: 'imp00000000a'



function requestPay() {
    IMP.request_pay({
      pg: "danal_tpay",
      pay_method: "card",
      merchant_uid: "ORD20180131-0000011",   // 주문번호
      name: "테스트 결제",
      amount: "[[${total}]]",                         // 숫자 타입
      buyer_email:"[[${user.username}]]",
      buyer_name: "[[${user.name}]]",
      buyer_tel: "[[${user.tel}]]"
    
    }, function (rsp) { // callback
      if(rsp.success){//결제 성공케이스
		  //alert("결제 성공")
		  //컨트롤러로 성공시 성공 ID 값 전달
		  
		  location.href='/cart/payment?imp_uid + rsp.imp_uid';
	  }else{ //실패 케이스
		 alert("결제 실패") 
	  }
    });
  }
  </script>
  <script>
	  function uuid() {
    return 'xxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
    });
}
console.log(uuid())
  </script>
</head>
<body>
	<th:block th:each="list:${list.itemList}">
	
	<a th:text="${list.name}"></a> /

	<a th:text="${list.price}"></a>
	<br>
</th:block>

총합:[[${total}]]
	<br>
결제:<button onclick="requestPay()">결제</button>
</body>
</html>